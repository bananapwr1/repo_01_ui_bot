# ü§ñ UI Bot - –¢–æ—Ä–≥–æ–≤—ã–π Telegram-–±–æ—Ç

UI-–±–æ—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π —á–µ—Ä–µ–∑ Telegram.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π —á–µ—Ä–µ–∑ Telegram
- **API-—Å–µ—Ä–≤–µ—Ä** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è —Å–≤—è–∑–∏ —Å –Ø–¥—Ä–æ–º –ê–Ω–∞–ª–∏–∑–∞ (Render)
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö Pocket Option
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)** - –≤–Ω–µ—à–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (–±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Telegram Bot
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `/set_po [–ª–æ–≥–∏–Ω] [–ø–∞—Ä–æ–ª—å]` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `/signal` - –∑–∞–ø—Ä–æ—Å —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞

### 2. FastAPI —Å–µ—Ä–≤–µ—Ä
- `POST /get_po_credentials` - —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î (SQLite)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.12+**
- **python-telegram-bot** - Telegram Bot API
- **FastAPI + Uvicorn** - REST API —Å–µ—Ä–≤–µ—Ä
- **Supabase** - –æ–±–ª–∞—á–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Cryptography (Fernet)** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **python-dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ Bothost):

```bash
# Telegram token (use ONE of these; preferred first):
TELEGRAM_BOT_TOKEN_UI=your_telegram_bot_token
# TELEGRAM_BOT_TOKEN=your_telegram_bot_token
# BOT_TOKEN=your_telegram_bot_token

ENCRYPTION_KEY=your_fernet_encryption_key
PORT=8000

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–∏–≥–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω—é—é –ë–î):
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_public_key

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (root admin-–∫–æ–º–∞–Ω–¥—ã):
ADMIN_USER_ID=123456789
```

### 3. –ó–∞–ø—É—Å–∫

```bash
python main.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.
‚îú‚îÄ‚îÄ main.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª (Telegram Bot + API)
‚îú‚îÄ‚îÄ user_db_handler.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
‚îú‚îÄ‚îÄ crypto_utils.py         # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ .gitignore             # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ BOTHOST_SETUP.md       # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Bothost
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Fernet (AES-128)
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ
- ‚úÖ `.env` —Ñ–∞–π–ª –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ git
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –∫–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ —Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üì° API Endpoints

### POST /get_po_credentials

–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è Pocket Option.

**Request:**
```json
{
  "user_id": 123456789,
  "request_source": "trading_core"
}
```

**Response (Success):**
```json
{
  "status": "success",
  "user_id": 123456789,
  "login_enc": "gAAAAABh...",
  "password_enc": "gAAAAABh..."
}
```

**Response (Error):**
```json
{
  "detail": "Credentials not found for user 123456789"
}
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
python -m py_compile main.py user_db_handler.py crypto_utils.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -c "from dotenv import load_dotenv; import os; load_dotenv(); print('OK' if all([os.getenv('TELEGRAM_BOT_TOKEN_UI'), os.getenv('ENCRYPTION_KEY')]) else 'MISSING VARS')"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

```python
from crypto_utils import encrypt_data, decrypt_data

test = "password123"
encrypted = encrypt_data(test)
decrypted = decrypt_data(encrypted)

assert test == decrypted, "Encryption/Decryption failed!"
print("‚úÖ Encryption works!")
```

## üì¶ –î–µ–ø–ª–æ–π

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Bothost —Å–º. –≤ —Ñ–∞–π–ª–µ [BOTHOST_SETUP.md](./BOTHOST_SETUP.md).

### –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏:
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Bothost
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
5. –ü–æ–ª—É—á–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–π URL –±–æ—Ç–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. `supabase_key is required`**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `SUPABASE_URL` –∏ `SUPABASE_KEY`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏

**2. `ENCRYPTION_KEY is required`**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ENCRYPTION_KEY` –≤ `.env` –∏–ª–∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ
- –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º Fernet-–∫–ª—é—á–æ–º (44 —Å–∏–º–≤–æ–ª–∞ base64)

**3. `Module not found`**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`

## üîó –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

- **Admin Bot** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–Ø–¥—Ä–æ –ê–Ω–∞–ª–∏–∑–∞ (Render)** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞
- **Supabase** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
- **Pocket Option API** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìù –õ–æ–≥–∏

–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```
INFO:__main__:üöÄ –ó–∞–ø—É—Å–∫ UI-–ë–æ—Ç–∞ (Telegram + API Server)...
INFO:uvicorn:Started server process
INFO:uvicorn:Waiting for application startup.
INFO:uvicorn:Application startup complete.
INFO:uvicorn:Uvicorn running on http://0.0.0.0:8000
```

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª [BOTHOST_SETUP.md](./BOTHOST_SETUP.md) –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024-12-11  
**–í–µ—Ä—Å–∏—è**: 1.0.0
